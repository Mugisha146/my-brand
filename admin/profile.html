<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit User Profile</title>
   <link rel="stylesheet" href="profile.css">
    <script src="https://kit.fontawesome.com/902bd6162d.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="data-container">
      <div class="title">
        <h1>PERSONAL INFORMATION</h1>
      </div>
      
      <div class="info">
        <img src="../images/Mugisha photo.jpeg" alt="user-photo" /><!--for those how has photo in localstorage-->
        <h1 id="fullname">Mugisha Emmanuel</h1>
        <p id="role">Full Stack developer</p>
        <p id="address">Kigali-Rwanda</p>
        <div class="butt">
          <button>follow</button><button>message</button>
        </div>
      </div>
        
      <div class="info-details">
        <div class="setting-info">
          <button>settings</button><!--to change password,to delete account,-->
        </div>
        <label for="name" id="fullNameLabel">Full Name:</label><!--name from localstorage-->
        <label for="email" id="emailLabel">Email:</label><!--email from localstorage-->
        <label for="phone" id="phoneLabel">Phone:</label><!--phone from localstorage-->
        <label for="role" id="roleLabel">Role:</label><!--role from localstorage-->
        <label for="Address" id="addressLabel">Address:</label><!--address from localstorage-->
      </div>
    </div>
    <div class="edit-info">
  
      <div class="form-info">
        <h2>Edit User Profile</h2>
        <form id="editForm">
          <label for="fullname">Full Name:</label>
          <input type="text" id="fullnameInput" name="fullname" required />
          <label for="email">Email:</label>
          <input type="email" id="emailInput" name="email" required />
          <label for="phone">Phone:</label>
          <input type="text" id="phoneInput" name="phone" required />
           <label for="Address">Address:</label>
              <input type="text" id="addressInput" name="address" required />
          <input type="submit" value="Save" />
        </form>
      </div>
    </div>
    <script>
      // Function to save user profile data to local storage
      function saveUserProfile(fullname, email, phone, address) {
        localStorage.setItem("userData", JSON.stringify({ fullname, email, phone, address }));
      }

      // Function to load user profile data from local storage
      function loadUserProfile() {
        const userData = JSON.parse(localStorage.getItem("userData")) || {};
        document.getElementById("fullname").textContent = userData.fullname || "";
        document.getElementById("role").textContent = "Role: " + (userData.role || "");
        document.getElementById("address").textContent = userData.address || "";
        
        document.getElementById("fullnameInput").value = userData.fullname || "";
        document.getElementById("emailInput").value = userData.email || "";
        document.getElementById("phoneInput").value = userData.phone || "";
        document.getElementById("addressInput").value = userData.address || "";
        
        //loaded user profile data to label
        document.getElementById("fullNameLabel").textContent = "Full Name: " + (userData.fullname || "");
        document.getElementById("emailLabel").textContent = "Email: " + (userData.email || "");
        document.getElementById("phoneLabel").textContent = "Phone: " + (userData.phone || "");
        document.getElementById("roleLabel").textContent = "Role: " + (userData.role || "");
        document.getElementById("addressLabel").textContent = "Address: " + (userData.address || "");
      }

      // Function to handle form submission
      function handleSubmit(event) {
        event.preventDefault();
        const fullname = document.getElementById("fullnameInput").value;
        const email = document.getElementById("emailInput").value;
        const phone = document.getElementById("phoneInput").value;
        const address = document.getElementById("addressInput").value;
        saveUserProfile(fullname, email, phone, address);
        alert("Profile updated successfully!");
      }

      // Load user profile data when the page loads
      window.onload = function () {
        loadUserProfile();
        document.getElementById("editForm").addEventListener("submit", handleSubmit);
      };
    </script>
  </body>
</html>
